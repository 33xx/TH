import base64
exec(base64.b64decode(b'ZnJvbSBhc3luY2lvIGltcG9ydCBzbGVlcAoKZnJvbSB0ZWxldGhvbi5lcnJvcnMgaW1wb3J0ICgKICAgIENoYXRBZG1pblJlcXVpcmVkRXJyb3IsCiAgICBGbG9vZFdhaXRFcnJvciwKICAgIE1lc3NhZ2VOb3RNb2RpZmllZEVycm9yLAogICAgVXNlckFkbWluSW52YWxpZEVycm9yLAopCmZyb20gdGVsZXRob24udGwgaW1wb3J0IGZ1bmN0aW9ucwpmcm9tIHRlbGV0aG9uLnRsLmZ1bmN0aW9ucy5jaGFubmVscyBpbXBvcnQgRWRpdEJhbm5lZFJlcXVlc3QKZnJvbSB0ZWxldGhvbi50bC50eXBlcyBpbXBvcnQgKAogICAgQ2hhbm5lbFBhcnRpY2lwYW50c0FkbWlucywKICAgIENoYW5uZWxQYXJ0aWNpcGFudHNLaWNrZWQsCiAgICBDaGF0QmFubmVkUmlnaHRzLAogICAgVXNlclN0YXR1c0VtcHR5LAogICAgVXNlclN0YXR1c0xhc3RNb250aCwKICAgIFVzZXJTdGF0dXNMYXN0V2VlaywKICAgIFVzZXJTdGF0dXNPZmZsaW5lLAogICAgVXNlclN0YXR1c09ubGluZSwKICAgIFVzZXJTdGF0dXNSZWNlbnRseSwKKQoKZnJvbSB1c2VyYm90IGltcG9ydCBqbXRob24KCmZyb20gLi5jb3JlLmxvZ2dlciBpbXBvcnQgbG9nZ2luZwpmcm9tIC4uY29yZS5tYW5hZ2VycyBpbXBvcnQgZWRpdF9kZWxldGUsIGVkaXRfb3JfcmVwbHkKZnJvbSAuLmhlbHBlcnMgaW1wb3J0IHJlYWRhYmxlX3RpbWUKZnJvbSAuIGltcG9ydCBCT1RMT0csIEJPVExPR19DSEFUSUQKCkxPR1MgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKcGx1Z2luX2NhdGVnb3J5ID0gImFkbWluIgoKQkFOTkVEX1JJR0hUUyA9IENoYXRCYW5uZWRSaWdodHMoCiAgICB1bnRpbF9kYXRlPU5vbmUsCiAgICB2aWV3X21lc3NhZ2VzPVRydWUsCiAgICBzZW5kX21lc3NhZ2VzPVRydWUsCiAgICBzZW5kX21lZGlhPVRydWUsCiAgICBzZW5kX3N0aWNrZXJzPVRydWUsCiAgICBzZW5kX2dpZnM9VHJ1ZSwKICAgIHNlbmRfZ2FtZXM9VHJ1ZSwKICAgIHNlbmRfaW5saW5lPVRydWUsCiAgICBlbWJlZF9saW5rcz1UcnVlLAopCgoKYXN5bmMgZGVmIGJhbl91c2VyKGNoYXRfaWQsIGksIHJpZ2h0cyk6CiAgICB0cnk6CiAgICAgICAgYXdhaXQgam10aG9uKGZ1bmN0aW9ucy5jaGFubmVscy5FZGl0QmFubmVkUmVxdWVzdChjaGF0X2lkLCBpLCByaWdodHMpKQogICAgICAgIHJldHVybiBUcnVlLCBOb25lCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4YzoKICAgICAgICByZXR1cm4gRmFsc2UsIHN0cihleGMpCgoKQGptdGhvbi5hcl9jbWQoCiAgICBwYXR0ZXJuPSLYp9i32LHYr9mG2YokIiwKICAgIGNvbW1hbmQ9KCLYp9i32LHYr9mG2YoiLCBwbHVnaW5fY2F0ZWdvcnkpLAogICAgaW5mbz17CiAgICAgICAgImhlYWRlciI6ICJUbyBraWNrIG15c2VsZiBmcm9tIGdyb3VwLiIsCiAgICAgICAgInVzYWdlIjogWwogICAgICAgICAgICAie3RyfWtpY2ttZSIsCiAgICAgICAgXSwKICAgIH0sCiAgICBncm91cHNfb25seT1UcnVlLAopCmFzeW5jIGRlZiBraWNrbWUobGVhdmUpOgogICAgInRvIGxlYXZlIHRoZSBncm91cC4iCiAgICBhd2FpdCBsZWF2ZS5lZGl0KCLimbDvuJkg2K3Ys9mG2Kcg2LPYo9i62KfYr9ixINin2YTZhdis2YXZiNi52Ycg2YjYr9in2LnYpyAiKQogICAgYXdhaXQgbGVhdmUuY2xpZW50LmtpY2tfcGFydGljaXBhbnQobGVhdmUuY2hhdF9pZCwgIm1lIikKCgpAam10aG9uLmFyX2NtZCgKICAgIHBhdHRlcm49Itiq2YHZhNmK2LQg2KjYp9mE2LfYsdivJCIsCiAgICBjb21tYW5kPSgi2KrZgdmE2YrYtCDYqNin2YTYt9ix2K8iLCBwbHVnaW5fY2F0ZWdvcnkpLAogICAgaW5mbz17CiAgICAgICAgImhlYWRlciI6ICJUbyBraWNrIGV2ZXJ5b25lIGZyb20gZ3JvdXAuIiwKICAgICAgICAiZGVzY3JpcHRpb24iOiAiVG8gS2ljayBhbGwgZnJvbSB0aGUgZ3JvdXAgZXhjZXB0IGFkbWlucy4iLAogICAgICAgICJ1c2FnZSI6IFsKICAgICAgICAgICAgInt0cn1raWNrYWxsIiwKICAgICAgICBdLAogICAgfSwKICAgIGdyb3Vwc19vbmx5PVRydWUsCiAgICByZXF1aXJlX2FkbWluPVRydWUsCikKYXN5bmMgZGVmIF8oZXZlbnQpOgogICAgIlRvIGtpY2sgZXZlcnlvbmUgZnJvbSBncm91cC4iCiAgICByZXN1bHQgPSBhd2FpdCBldmVudC5jbGllbnQoCiAgICAgICAgZnVuY3Rpb25zLmNoYW5uZWxzLkdldFBhcnRpY2lwYW50UmVxdWVzdChldmVudC5jaGF0X2lkLCBldmVudC5jbGllbnQudWlkKQogICAgKQogICAgaWYgbm90IHJlc3VsdC5wYXJ0aWNpcGFudC5hZG1pbl9yaWdodHMuYmFuX3VzZXJzOgogICAgICAgIHJldHVybiBhd2FpdCBlZGl0X29yX3JlcGx5KAogICAgICAgICAgICBldmVudCwgIuKZsO+4mS0g2YrYqNiv2Ygg2KfZhtmHINmE2YrYsyDZhNiv2YrZgyDYtdmE2KfYrdmK2KfYqiDYp9mE2K3YsNmBINmB2Yog2YfYsNmHINin2YTYr9ix2K/YtNipICIKICAgICAgICApCiAgICBjYXRldmVudCA9IGF3YWl0IGVkaXRfb3JfcmVwbHkoZXZlbnQsICJg2YrYqtmFINin2YTYt9ix2K8g2KfZhtiq2LjYsSDZgtmE2YrZhNinIGAiKQogICAgYWRtaW5zID0gYXdhaXQgZXZlbnQuY2xpZW50LmdldF9wYXJ0aWNpcGFudHMoCiAgICAgICAgZXZlbnQuY2hhdF9pZCwgZmlsdGVyPUNoYW5uZWxQYXJ0aWNpcGFudHNBZG1pbnMKICAgICkKICAgIGFkbWluc19pZCA9IFtpLmlkIGZvciBpIGluIGFkbWluc10KICAgIHRvdGFsID0gMAogICAgc3VjY2VzcyA9IDAKICAgIGFzeW5jIGZvciB1c2VyIGluIGV2ZW50LmNsaWVudC5pdGVyX3BhcnRpY2lwYW50cyhldmVudC5jaGF0X2lkKToKICAgICAgICB0b3RhbCArPSAxCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiB1c2VyLmlkIG5vdCBpbiBhZG1pbnNfaWQ6CiAgICAgICAgICAgICAgICBhd2FpdCBldmVudC5jbGllbnQua2lja19wYXJ0aWNpcGFudChldmVudC5jaGF0X2lkLCB1c2VyLmlkKQogICAgICAgICAgICAgICAgc3VjY2VzcyArPSAxCiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCgwLjUpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBMT0dTLmluZm8oc3RyKGUpKQogICAgICAgICAgICBhd2FpdCBzbGVlcCgwLjUpCiAgICBhd2FpdCBjYXRldmVudC5lZGl0KGYi4pmw77iZINiq2YUg2KjZhtis2KfYrSDYt9ix2K8g2YXZhiB7dG90YWx9INin2YTYp9i52LbYp9ihIOKchSAiKQoKCkBqbXRob24uYXJfY21kKAogICAgcGF0dGVybj0i2KrZgdmE2YrYtCDYqNin2YTYrdi42LEkIiwKICAgIGNvbW1hbmQ9KCLYqtmB2YTZiti0INio2KfZhNit2LjYsSIsIHBsdWdpbl9jYXRlZ29yeSksCiAgICBpbmZvPXsKICAgICAgICAiaGVhZGVyIjogIlRvIGJhbiBldmVyeW9uZSBmcm9tIGdyb3VwLiIsCiAgICAgICAgImRlc2NyaXB0aW9uIjogIlRvIGJhbiBhbGwgZnJvbSB0aGUgZ3JvdXAgZXhjZXB0IGFkbWlucy4iLAogICAgICAgICJ1c2FnZSI6IFsKICAgICAgICAgICAgInt0cn1raWNrYWxsIiwKICAgICAgICBdLAogICAgfSwKICAgIGdyb3Vwc19vbmx5PVRydWUsCiAgICByZXF1aXJlX2FkbWluPVRydWUsCikKYXN5bmMgZGVmIF8oZXZlbnQpOgogICAgIlRvIGJhbiBldmVyeW9uZSBmcm9tIGdyb3VwLiIKICAgIHJlc3VsdCA9IGF3YWl0IGV2ZW50LmNsaWVudCgKICAgICAgICBmdW5jdGlvbnMuY2hhbm5lbHMuR2V0UGFydGljaXBhbnRSZXF1ZXN0KGV2ZW50LmNoYXRfaWQsIGV2ZW50LmNsaWVudC51aWQpCiAgICApCiAgICBpZiBub3QgcmVzdWx0OgogICAgICAgIHJldHVybiBhd2FpdCBlZGl0X29yX3JlcGx5KAogICAgICAgICAgICBldmVudCwgIuKZsO+4mS0g2YrYqNiv2Ygg2KfZhtmHINmE2YrYsyDZhNiv2YrZgyDYtdmE2KfYrdmK2KfYqiDYp9mE2K3YsNmBINmB2Yog2YfYsNmHINin2YTYr9ix2K/YtNipIOKdlSIKICAgICAgICApCiAgICBjYXRldmVudCA9IGF3YWl0IGVkaXRfb3JfcmVwbHkoZXZlbnQsICJg2KzYp9ixINin2YTYrdi42LEg2KfZhtiq2LjYsSDZgtmE2YrZhNinICBgIikKICAgIGFkbWlucyA9IGF3YWl0IGV2ZW50LmNsaWVudC5nZXRfcGFydGljaXBhbnRzKAogICAgICAgIGV2ZW50LmNoYXRfaWQsIGZpbHRlcj1DaGFubmVsUGFydGljaXBhbnRzQWRtaW5zCiAgICApCiAgICBhZG1pbnNfaWQgPSBbaS5pZCBmb3IgaSBpbiBhZG1pbnNdCiAgICB0b3RhbCA9IDAKICAgIHN1Y2Nlc3MgPSAwCiAgICBhc3luYyBmb3IgdXNlciBpbiBldmVudC5jbGllbnQuaXRlcl9wYXJ0aWNpcGFudHMoZXZlbnQuY2hhdF9pZCk6CiAgICAgICAgdG90YWwgKz0gMQogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgdXNlci5pZCBub3QgaW4gYWRtaW5zX2lkOgogICAgICAgICAgICAgICAgYXdhaXQgZXZlbnQuY2xpZW50KAogICAgICAgICAgICAgICAgICAgIEVkaXRCYW5uZWRSZXF1ZXN0KGV2ZW50LmNoYXRfaWQsIHVzZXIuaWQsIEJBTk5FRF9SSUdIVFMpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBzdWNjZXNzICs9IDEKICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKDAuNSkgICMgZm9yIGF2b2lkIGFueSBmbG9vZCB3YWl0cyAhIS0+IGRvIG5vdCByZW1vdmUgaXQKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIExPR1MuaW5mbyhzdHIoZSkpCiAgICBhd2FpdCBjYXRldmVudC5lZGl0KGYi4pmw77iZINiq2YUg2KjZhtis2KfYrSDYrdi42LEg2YXZhiB7dG90YWx9INin2YTYp9i52LbYp9ihIOKchSAiKQoKCkBqbXRob24uYXJfY21kKAogICAgcGF0dGVybj0i2K3YsNmBINin2YTZhdit2LjZiNix2YrZhiQiLAogICAgY29tbWFuZD0oItit2LDZgSDYp9mE2YXYrdi42YjYsdmK2YYiLCBwbHVnaW5fY2F0ZWdvcnkpLAogICAgaW5mbz17CiAgICAgICAgImhlYWRlciI6ICJUbyB1bmJhbiBhbGwgYmFubmVkIHVzZXJzIGZyb20gZ3JvdXAuIiwKICAgICAgICAidXNhZ2UiOiBbCiAgICAgICAgICAgICJ7dHJ9dW5iYW5hbGwiLAogICAgICAgIF0sCiAgICB9LAogICAgZ3JvdXBzX29ubHk9VHJ1ZSwKICAgIHJlcXVpcmVfYWRtaW49VHJ1ZSwKKQphc3luYyBkZWYgXyhldmVudCk6CiAgICAiVG8gdW5iYW4gYWxsIGJhbm5lZCB1c2VycyBmcm9tIGdyb3VwLiIKICAgIGNhdGV2ZW50ID0gYXdhaXQgZWRpdF9vcl9yZXBseSgKICAgICAgICBldmVudCwgIioq4pmw77iZ2YrYqtmA2YUg2KfZhNmA2LrYp9ihINit2YDYuNixINin2YTYrNmA2YXZiti5INmB2YDZiiDZh9iw2Ycg2KfZhNmA2K/Ysdiv2LTZgNipKioiCiAgICApCiAgICBzdWNjID0gMAogICAgdG90YWwgPSAwCiAgICBmbGFnID0gRmFsc2UKICAgIGNoYXQgPSBhd2FpdCBldmVudC5nZXRfY2hhdCgpCiAgICBhc3luYyBmb3IgaSBpbiBldmVudC5jbGllbnQuaXRlcl9wYXJ0aWNpcGFudHMoCiAgICAgICAgZXZlbnQuY2hhdF9pZCwgZmlsdGVyPUNoYW5uZWxQYXJ0aWNpcGFudHNLaWNrZWQsIGFnZ3Jlc3NpdmU9VHJ1ZQogICAgKToKICAgICAgICB0b3RhbCArPSAxCiAgICAgICAgcmlnaHRzID0gQ2hhdEJhbm5lZFJpZ2h0cyh1bnRpbF9kYXRlPTAsIHZpZXdfbWVzc2FnZXM9RmFsc2UpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBhd2FpdCBldmVudC5jbGllbnQoCiAgICAgICAgICAgICAgICBmdW5jdGlvbnMuY2hhbm5lbHMuRWRpdEJhbm5lZFJlcXVlc3QoZXZlbnQuY2hhdF9pZCwgaSwgcmlnaHRzKQogICAgICAgICAgICApCiAgICAgICAgZXhjZXB0IEZsb29kV2FpdEVycm9yIGFzIGU6CiAgICAgICAgICAgIExPR1Mud2FybihmItmE2YLYryDYrdiv2Ksg2LnZhdmE2YrZhyDYqtmD2LHYp9ixINmD2KvZitixINin2LHYrNmIINin2LnYp9iv2Kkg2KfZhNin2YXYsSDYp9mIINin2YbYqti42LEiKQogICAgICAgICAgICBhd2FpdCBjYXRldmVudC5lZGl0KAogICAgICAgICAgICAgICAgZiLYo9mG2KrZgNi42LEg2YTZgCB7cmVhZGFibGVfdGltZShlLnNlY29uZHMpfSDYqtit2KrYp9i3INmE2KfYudin2K/YqSDYp9mE2KfZhdixINmE2KfZg9mF2KfZhCDYp9mE2LnZhdmE2YrYqSIKICAgICAgICAgICAgKQogICAgICAgICAgICBhd2FpdCBzbGVlcChlLnNlY29uZHMgKyA1KQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZXg6CiAgICAgICAgICAgIGF3YWl0IGNhdGV2ZW50LmVkaXQoc3RyKGV4KSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzdWNjICs9IDEKICAgICAgICAgICAgaWYgZmxhZzoKICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKDIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCgxKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBzdWNjICUgMTAgPT0gMDoKICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYXRldmVudC5lZGl0KAogICAgICAgICAgICAgICAgICAgICAgICBmIuKZsO+4mSDYp9mE2LrYp9ihINit2LjYsSDYrNmF2YrYuSDYp9mE2K3Ys9in2KjYp9iqXG7YqtmFINin2YTYutin2KEg2K3YuNixINis2YXZiti5INin2YTYp9i52LbYp9ihINio2YbYrNin2K0g4pyFIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZXhjZXB0IE1lc3NhZ2VOb3RNb2RpZmllZEVycm9yOgogICAgICAgICAgICAgICAgcGFzcwogICAgYXdhaXQgY2F0ZXZlbnQuZWRpdChmIuKZsO+4mdin2YTYutin2KEg2K3YuNixIDpfX3tzdWNjfS97dG90YWx9INmB2Yog2KfZhNiv2LHYr9i02Ycge2NoYXQudGl0bGV9X18iKQoKCiMgUG9ydGVkIGJ5IMKpW05JS0lUQV0odC5tZS9raXJpdG82OTY5KSBhbmQgwqlbRVlFUEFUQ0hdKHQubWUvTmVvTWF0cml4OTApCkBqbXRob24uYXJfY21kKAogICAgcGF0dGVybj0i2KfZhNmF2K3YsNmI2YHZitmGID8oW1xzXFNdKikiLAogICAgY29tbWFuZD0oItin2YTZhdit2LDZiNmB2YrZhiIsIHBsdWdpbl9jYXRlZ29yeSksCiAgICBpbmZvPXsKICAgICAgICAiaGVhZGVyIjogIlRvIGNoZWNrIGRlbGV0ZWQgYWNjb3VudHMgYW5kIGNsZWFuIiwKICAgICAgICAiZGVzY3JpcHRpb24iOiAiU2VhcmNoZXMgZm9yIGRlbGV0ZWQgYWNjb3VudHMgaW4gYSBncm91cC4gVXNlIGAuem9tYmllcyBjbGVhbmAgdG8gcmVtb3ZlIGRlbGV0ZWQgYWNjb3VudHMgZnJvbSB0aGUgZ3JvdXAuIiwKICAgICAgICAidXNhZ2UiOiBbInt0cn16b21iaWVzIiwgInt0cn16b21iaWVzIGNsZWFuIl0sCiAgICB9LAogICAgZ3JvdXBzX29ubHk9VHJ1ZSwKKQphc3luYyBkZWYgcm1fZGVsZXRlZGFjYyhzaG93KToKICAgICJUbyBjaGVjayBkZWxldGVkIGFjY291bnRzIGFuZCBjbGVhbiIKICAgIGNvbiA9IHNob3cucGF0dGVybl9tYXRjaC5ncm91cCgxKS5sb3dlcigpCiAgICBkZWxfdSA9IDAKICAgIGRlbF9zdGF0dXMgPSAi4pmw77iZINmE2YUg2YrYqtmFINin2YTYudir2YjYsSDYudmE2Ykg2K3Ys9in2KjYp9iqINmF2KrYsdmI2YPZhyDYp9mIINit2LPYp9io2KfYqiDZhdit2LDZiNmB2Kkg2KfZhNmD2LHZiNioINmG2LjZitmBIgogICAgaWYgY29uICE9ICLYp9i32LHYr9mH2YUiOgogICAgICAgIGV2ZW50ID0gYXdhaXQgZWRpdF9vcl9yZXBseSgKICAgICAgICAgICAgc2hvdywgIuKZsO+4mSDZitiq2YUg2KfZhNio2K3YqyDYudmGINit2LPYp9io2KfYqiDZhdit2LDZiNmB2Kkg2KfZiCDYrdiz2KfYqNin2Kog2YXYqtix2YjZg9ipINin2YbYqti42LEiCiAgICAgICAgKQogICAgICAgIGFzeW5jIGZvciB1c2VyIGluIHNob3cuY2xpZW50Lml0ZXJfcGFydGljaXBhbnRzKHNob3cuY2hhdF9pZCk6CiAgICAgICAgICAgIGlmIHVzZXIuZGVsZXRlZDoKICAgICAgICAgICAgICAgIGRlbF91ICs9IDEKICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKDAuNSkKICAgICAgICBpZiBkZWxfdSA+IDA6CiAgICAgICAgICAgIGRlbF9zdGF0dXMgPSBmIuKZsO+4mdiq2YDZhSDYp9mE2LnZgNir2YjYsSA6ICoqe2RlbF91fSoqINi52YTZiSDYrdiz2KfYqNin2Kog2YXYrdiw2YjZgdipINmI2YXYqtix2YjZg9mHINmB2Yog2YfYsNmHINin2YTYr9ix2K/YtNmHINmF2YYg2KfZhNit2LPYp9io2KfYqiDZgdmKINmH2LDZhyDYp9mE2K/Ysdiv2LTZhyxcCiAgICAgICAgICAgICAgICAgICAgICAgICAgIFxu2KfYt9ix2K/Zh9mFINio2YjYp9iz2LfZhyAgYC7Yp9mE2YXYrdiw2YjZgdmK2YYg2KfYt9ix2K/Zh9mFYCIKICAgICAgICBhd2FpdCBldmVudC5lZGl0KGRlbF9zdGF0dXMpCiAgICAgICAgcmV0dXJuCiAgICBjaGF0ID0gYXdhaXQgc2hvdy5nZXRfY2hhdCgpCiAgICBhZG1pbiA9IGNoYXQuYWRtaW5fcmlnaHRzCiAgICBjcmVhdG9yID0gY2hhdC5jcmVhdG9yCiAgICBpZiBub3QgYWRtaW4gYW5kIG5vdCBjcmVhdG9yOgogICAgICAgIGF3YWl0IGVkaXRfZGVsZXRlKHNob3csICLYo9mG2Kcg2YTYs9mA2Kog2YXYtNix2YEg2YfZgNmG2KciLCA1KQogICAgICAgIHJldHVybgogICAgZXZlbnQgPSBhd2FpdCBlZGl0X29yX3JlcGx5KHNob3csICLimbDvuJnYrNin2LHZiiDYrdiw2YEg2KfZhNit2LPYp9io2KfYqiDYp9mE2YXYrdiw2YjZgdipIikKICAgIGRlbF91ID0gMAogICAgZGVsX2EgPSAwCiAgICBhc3luYyBmb3IgdXNlciBpbiBzaG93LmNsaWVudC5pdGVyX3BhcnRpY2lwYW50cyhzaG93LmNoYXRfaWQpOgogICAgICAgIGlmIHVzZXIuZGVsZXRlZDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgYXdhaXQgc2hvdy5jbGllbnQua2lja19wYXJ0aWNpcGFudChzaG93LmNoYXRfaWQsIHVzZXIuaWQpCiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCgwLjUpCiAgICAgICAgICAgICAgICBkZWxfdSArPSAxCiAgICAgICAgICAgIGV4Y2VwdCBDaGF0QWRtaW5SZXF1aXJlZEVycm9yOgogICAgICAgICAgICAgICAgYXdhaXQgZWRpdF9kZWxldGUoZXZlbnQsICLimbDvuJkg2YTZitizINmE2K/ZiiDYtdmE2KfYrdmK2KfYqiDYp9mE2K3YuNixINmH2YbYpyIsIDUpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZXhjZXB0IFVzZXJBZG1pbkludmFsaWRFcnJvcjoKICAgICAgICAgICAgICAgIGRlbF9hICs9IDEKICAgIGlmIGRlbF91ID4gMDoKICAgICAgICBkZWxfc3RhdHVzID0gZiLYp9mE2KrZhti42YrZgSAqKntkZWxfdX0qKiDZhdmGINin2YTYrdiz2KfYqNin2Kog2KfZhNmF2K3YsNmI2YHYqSIKICAgIGlmIGRlbF9hID4gMDoKICAgICAgICBkZWxfc3RhdHVzID0gZiLYp9mE2KrZhti42YrZgSAqKntkZWxfdX0qKiDZhdmGINin2YTYrdiz2KfYqNin2Kog2KfZhNmF2K3YsNmI2YEgXAogICAgICAgIFxuKip7ZGVsX2F9Kiog2YTYpyDZitmF2YPZhtmG2Yog2K3YsNmBINit2LPYp9io2KfYqiDYp9mE2YXYtNix2YHZitmGINin2YTZhdit2LDZiNmB2KkiCiAgICBhd2FpdCBlZGl0X2RlbGV0ZShldmVudCwgZGVsX3N0YXR1cywgNSkKICAgIGlmIEJPVExPRzoKICAgICAgICBhd2FpdCBzaG93LmNsaWVudC5zZW5kX21lc3NhZ2UoCiAgICAgICAgICAgIEJPVExPR19DSEFUSUQsCiAgICAgICAgICAgIGYiI9iq2YbZgNi42YrZgSDYp9mE2YDZhdit2LDZiNmB2KfYqlwKICAgICAgICAgICAgXG57ZGVsX3N0YXR1c31cCiAgICAgICAgICAgIFxu2KfZhNmA2K/Ysdiv2LTYqToge3Nob3cuY2hhdC50aXRsZX0oYHtzaG93LmNoYXRfaWR9YCkiLAogICAgICAgICkKCgpAam10aG9uLmFyX2NtZCgKICAgIHBhdHRlcm49Itin2K3Ytdin2KbZitin2Kog2KfZhNin2LnYttin2KEgPyhbXHNcU10qKSIsCiAgICBjb21tYW5kPSgi2KfYrdi12KfYptmK2KfYqiDYp9mE2KfYudi22KfYoSIsIHBsdWdpbl9jYXRlZ29yeSksCiAgICBpbmZvPXsKICAgICAgICAiaGVhZGVyIjogIlRvIGdldCBicmVpZiBzdW1tYXJ5IG9mIG1lbWJlcnMgaW4gdGhlIGdyb3VwIiwKICAgICAgICAiZGVzY3JpcHRpb24iOiAiVG8gZ2V0IGJyZWlmIHN1bW1hcnkgb2YgbWVtYmVycyBpbiB0aGUgZ3JvdXAgLiBOZWVkIHRvIGFkZCBzb21lIGZlYXR1cmVzIGluIGZ1dHVyZS4iLAogICAgICAgICJ1c2FnZSI6IFsKICAgICAgICAgICAgInt0cn1pa3VjayIsCiAgICAgICAgXSwKICAgIH0sCiAgICBncm91cHNfb25seT1UcnVlLAopCmFzeW5jIGRlZiBfKGV2ZW50KTogICMgc291cmNlcnkgbm8tbWV0cmljcwogICAgIlRvIGdldCBicmVpZiBzdW1tYXJ5IG9mIG1lbWJlcnMgaW4gdGhlIGdyb3VwLjEgMTEiCiAgICBpbnB1dF9zdHIgPSBldmVudC5wYXR0ZXJuX21hdGNoLmdyb3VwKDEpCiAgICBpZiBpbnB1dF9zdHI6CiAgICAgICAgY2hhdCA9IGF3YWl0IGV2ZW50LmdldF9jaGF0KCkKICAgICAgICBpZiBub3QgY2hhdC5hZG1pbl9yaWdodHMgYW5kIG5vdCBjaGF0LmNyZWF0b3I6CiAgICAgICAgICAgIGF3YWl0IGVkaXRfb3JfcmVwbHkoZXZlbnQsICIg2KfZhtiqINmE2LPYqiDZhdi02LHZgSDZh9mG2Kcg4pmw77iZIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBwID0gMAogICAgYiA9IDAKICAgIGMgPSAwCiAgICBkID0gMAogICAgZSA9IFtdCiAgICBtID0gMAogICAgbiA9IDAKICAgIHkgPSAwCiAgICB3ID0gMAogICAgbyA9IDAKICAgIHEgPSAwCiAgICByID0gMAogICAgZXQgPSBhd2FpdCBlZGl0X29yX3JlcGx5KGV2ZW50LCAi2YrYqtmFINin2YTYqNit2Ksg2YHZiiDYp9mE2YLZiNin2KbZhSDimbDvuJkiKQogICAgYXN5bmMgZm9yIGkgaW4gZXZlbnQuY2xpZW50Lml0ZXJfcGFydGljaXBhbnRzKGV2ZW50LmNoYXRfaWQpOgogICAgICAgIHAgKz0gMQogICAgICAgICMKICAgICAgICAjIE5vdGUgdGhhdCBpdCdzICJyZXZlcnNlZCIuIFlvdSBtdXN0IHNldCB0byBgYFRydWVgYCB0aGUgcGVybWlzc2lvbnMKICAgICAgICAjIHlvdSB3YW50IHRvIFJFTU9WRSwgYW5kIGxlYXZlIGFzIGBgTm9uZWBgIHRob3NlIHlvdSB3YW50IHRvIEtFRVAuCiAgICAgICAgcmlnaHRzID0gQ2hhdEJhbm5lZFJpZ2h0cyh1bnRpbF9kYXRlPU5vbmUsIHZpZXdfbWVzc2FnZXM9VHJ1ZSkKICAgICAgICBpZiBpc2luc3RhbmNlKGkuc3RhdHVzLCBVc2VyU3RhdHVzRW1wdHkpOgogICAgICAgICAgICB5ICs9IDEKICAgICAgICAgICAgaWYgInkiIGluIGlucHV0X3N0cjoKICAgICAgICAgICAgICAgIHN0YXR1cywgZSA9IGF3YWl0IGJhbl91c2VyKGV2ZW50LmNoYXRfaWQsIGksIHJpZ2h0cykKICAgICAgICAgICAgICAgIGlmIHN0YXR1czoKICAgICAgICAgICAgICAgICAgICBjICs9IDEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXQuZWRpdCgi4pmw77iZINin2K3Yqtin2Kwg2KfZhNmJINi12YTYp9it2YrYp9iqINin2YTZhdi02LHZgdmK2YYg2YTZhNmC2YrYp9mFINio2YfYsNinINin2YTYp9mF2LEgIikKICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZChzdHIoZSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiBpc2luc3RhbmNlKGkuc3RhdHVzLCBVc2VyU3RhdHVzTGFzdE1vbnRoKToKICAgICAgICAgICAgbSArPSAxCiAgICAgICAgICAgIGlmICJtIiBpbiBpbnB1dF9zdHI6CiAgICAgICAgICAgICAgICBzdGF0dXMsIGUgPSBhd2FpdCBiYW5fdXNlcihldmVudC5jaGF0X2lkLCBpLCByaWdodHMpCiAgICAgICAgICAgICAgICBpZiBzdGF0dXM6CiAgICAgICAgICAgICAgICAgICAgYyArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IGV0LmVkaXQoIuKZsO+4mSDYp9it2KrYp9isINin2YTZiSDYtdmE2KfYrdmK2KfYqiDYp9mE2YXYtNix2YHZitmGINmE2YTZgtmK2KfZhSDYqNmH2LDYpyDYp9mE2KfZhdixICIpCiAgICAgICAgICAgICAgICAgICAgZS5hcHBlbmQoc3RyKGUpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLnN0YXR1cywgVXNlclN0YXR1c0xhc3RXZWVrKToKICAgICAgICAgICAgdyArPSAxCiAgICAgICAgICAgIGlmICJ3IiBpbiBpbnB1dF9zdHI6CiAgICAgICAgICAgICAgICBzdGF0dXMsIGUgPSBhd2FpdCBiYW5fdXNlcihldmVudC5jaGF0X2lkLCBpLCByaWdodHMpCiAgICAgICAgICAgICAgICBpZiBzdGF0dXM6CiAgICAgICAgICAgICAgICAgICAgYyArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IGV0LmVkaXQoIuKZsO+4mSDYp9it2KrYp9isINin2YTZiSDYtdmE2KfYrdmK2KfYqiDYp9mE2YXYtNix2YHZitmGINmE2YTZgtmK2KfZhSDYqNmH2LDYpyDYp9mE2KfZhdixICIpCiAgICAgICAgICAgICAgICAgICAgZS5hcHBlbmQoc3RyKGUpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLnN0YXR1cywgVXNlclN0YXR1c09mZmxpbmUpOgogICAgICAgICAgICBvICs9IDEKICAgICAgICAgICAgaWYgIm8iIGluIGlucHV0X3N0cjoKICAgICAgICAgICAgICAgIHN0YXR1cywgZSA9IGF3YWl0IGJhbl91c2VyKGV2ZW50LmNoYXRfaWQsIGksIHJpZ2h0cykKICAgICAgICAgICAgICAgIGlmIG5vdCBzdGF0dXM6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXQuZWRpdCgi4pmw77iZINin2K3Yqtin2Kwg2KfZhNmJINi12YTYp9it2YrYp9iqINin2YTZhdi02LHZgdmK2YYg2YTZhNmC2YrYp9mFINio2YfYsNinINin2YTYp9mF2LEgIikKICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZChzdHIoZSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYyArPSAxCiAgICAgICAgaWYgaXNpbnN0YW5jZShpLnN0YXR1cywgVXNlclN0YXR1c09ubGluZSk6CiAgICAgICAgICAgIHEgKz0gMQogICAgICAgICAgICBpZiAicSIgaW4gaW5wdXRfc3RyOgogICAgICAgICAgICAgICAgc3RhdHVzLCBlID0gYXdhaXQgYmFuX3VzZXIoZXZlbnQuY2hhdF9pZCwgaSwgcmlnaHRzKQogICAgICAgICAgICAgICAgaWYgbm90IHN0YXR1czoKICAgICAgICAgICAgICAgICAgICBhd2FpdCBldC5lZGl0KCLimbDvuJkg2KfYrdiq2KfYrCDYp9mE2Ykg2LXZhNin2K3Zitin2Kog2KfZhNmF2LTYsdmB2YrZhiDZhNmE2YLZitin2YUg2KjZh9iw2Kcg2KfZhNin2YXYsSAiKQogICAgICAgICAgICAgICAgICAgIGUuYXBwZW5kKHN0cihlKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBjICs9IDEKICAgICAgICBpZiBpc2luc3RhbmNlKGkuc3RhdHVzLCBVc2VyU3RhdHVzUmVjZW50bHkpOgogICAgICAgICAgICByICs9IDEKICAgICAgICAgICAgaWYgInIiIGluIGlucHV0X3N0cjoKICAgICAgICAgICAgICAgIHN0YXR1cywgZSA9IGF3YWl0IGJhbl91c2VyKGV2ZW50LmNoYXRfaWQsIGksIHJpZ2h0cykKICAgICAgICAgICAgICAgIGlmIHN0YXR1czoKICAgICAgICAgICAgICAgICAgICBjICs9IDEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXQuZWRpdCgi4pmw77iZ2KfYrdiq2KfYrCDYp9mE2Ykg2LXZhNin2K3Zitin2Kog2KfZhNmF2LTYsdmB2YrZhiDZhNmE2YLZitin2YUg2KjZh9iw2Kcg2KfZhNin2YXYsSAiKQogICAgICAgICAgICAgICAgICAgIGUuYXBwZW5kKHN0cihlKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgIGlmIGkuYm90OgogICAgICAgICAgICBiICs9IDEKICAgICAgICAgICAgaWYgImIiIGluIGlucHV0X3N0cjoKICAgICAgICAgICAgICAgIHN0YXR1cywgZSA9IGF3YWl0IGJhbl91c2VyKGV2ZW50LmNoYXRfaWQsIGksIHJpZ2h0cykKICAgICAgICAgICAgICAgIGlmIG5vdCBzdGF0dXM6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXQuZWRpdCgi4pmw77iZ2KfYrdiq2KfYrCDYp9mE2Ykg2LXZhNin2K3Zitin2Kog2KfZhNmF2LTYsdmB2YrZhiDZhNmE2YLZitin2YUg2KjZh9iw2Kcg2KfZhNin2YXYsSAiKQogICAgICAgICAgICAgICAgICAgIGUuYXBwZW5kKHN0cihlKSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBjICs9IDEKICAgICAgICBlbGlmIGkuZGVsZXRlZDoKICAgICAgICAgICAgZCArPSAxCiAgICAgICAgICAgIGlmICJkIiBpbiBpbnB1dF9zdHI6CiAgICAgICAgICAgICAgICBzdGF0dXMsIGUgPSBhd2FpdCBiYW5fdXNlcihldmVudC5jaGF0X2lkLCBpLCByaWdodHMpCiAgICAgICAgICAgICAgICBpZiBzdGF0dXM6CiAgICAgICAgICAgICAgICAgICAgYyArPSAxCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IGV0LmVkaXQoIuKZsO+4mdin2K3Yqtin2Kwg2KfZhNmJINi12YTYp9it2YrYp9iqINin2YTZhdi02LHZgdmK2YYg2YTZhNmC2YrYp9mFINio2YfYsNinINin2YTYp9mF2LEgIikKICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZChzdHIoZSkpCiAgICAgICAgZWxpZiBpLnN0YXR1cyBpcyBOb25lOgogICAgICAgICAgICBuICs9IDEKICAgIGlmIGlucHV0X3N0cjoKICAgICAgICByZXF1aXJlZF9zdHJpbmcgPSAiIiLYp9mE2YDZhdi32LHZiNiv2YrZhiB7fSAvIHt9INin2YTYo9i52YDYttin2KEK2KfZhNit2YDYs9in2KjZgNin2Kog2KfZhNmF2YDYrdiw2YjZgdipOiB7fQrYrdmA2KfZhNipINin2YTZhdiz2KrZgNiu2K/ZhSDYp9mE2YHZgNin2LHYutmHOiB7fQrYp9iu2LEg2LjZh9mI2LEg2YXZhtiwINi02YDZh9ixOiB7fQrYp9iu2LEg2LjZgNmH2YjYsSDZhdmG2YDYsCDYp9iz2KjZiNi5OiB7fQrYutmK2LEg2YXYqti12YQ6IHt9Ctin2YTZhdiz2KrYrtiv2YXZitmGINin2YTZhti02LfZiNmGOiB7fQrYp9iu2LEg2LjZh9mI2LEg2YLYqNmEINmC2YTZitmEOiB7fQrYp9mE2KjZiNiq2KfYqjoge30K2YXZgNmE2KfYrdi42Kk6IHt9IiIiCiAgICAgICAgYXdhaXQgZXQuZWRpdChyZXF1aXJlZF9zdHJpbmcuZm9ybWF0KGMsIHAsIGQsIHksIG0sIHcsIG8sIHEsIHIsIGIsIG4pKQogICAgICAgIGF3YWl0IHNsZWVwKDUpCiAgICBhd2FpdCBldC5lZGl0KAogICAgICAgICIiIjoge30g2YXZgNis2YXZiNi5INin2YTZhdmA2LPYqtiu2K/ZhdmK2YYK2KfZhNit2YDYs9in2KjZgNin2Kog2KfZhNmF2YDYrdiw2YjZgdipOiB7fQrYrdmA2KfZhNipINin2YTZhdiz2KrZgNiu2K/ZhSDYp9mE2YHZgNin2LHYutmHOiB7fQrYp9iu2LEg2LjZh9mI2LEg2YXZhtiwINi02YDZh9ixOiB7fQrYp9iu2LEg2LjZgNmH2YjYsSDZhdmG2YDYsCDYp9iz2KjZiNi5OiB7fQrYutmK2LEg2YXYqti12YQ6IHt9Ctin2YTZhdiz2KrYrtiv2YXZitmGINin2YTZhti02LfZiNmGOiB7fQrYp9iu2LEg2LjZh9mI2LEg2YLYqNmEINmC2YTZitmEOiB7fQrYp9mE2KjZiNiq2KfYqjoge30K2YXZgNmE2KfYrdi42Kk6IHt9IiIiLmZvcm1hdCgKICAgICAgICAgICAgcCwgZCwgeSwgbSwgdywgbywgcSwgciwgYiwgbgogICAgICAgICkKICAgICkK'))
